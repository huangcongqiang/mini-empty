<!--pages/admin/admin.wxml-->
<view class="container">
  <!-- 头部信息 -->
  <view class="header">
    <view class="store-info">
      <view class="store-icon">
        <image class="store-avatar" src="/assets/avatar.jpg" mode="aspectFill"></image>
      </view>
      <view class="store-text">
        <view class="store-name">{{userInfo.storeName || '我的店铺'}}</view>
        <view class="store-user">@{{userInfo.username}}</view>
      </view>
    </view>
    <view class="header-actions">
      <button class="qr-btn" bindtap="showQRCode" aria-label="显示店铺二维码">
        <image class="qr-icon" src="/assets/qrcode.svg" mode="aspectFit"></image>
      </button>
    </view>
  </view>

  <!-- 功能入口 -->
  <view class="menu-section">
    <view class="section-title">店铺管理</view>

    <view class="menu-grid">
      <view class="menu-item" bindtap="goToProducts" aria-label="商品管理" role="button">
        <view class="menu-icon purple">
          <image class="menu-icon-img" src="/assets/package.svg" mode="aspectFit"></image>
        </view>
        <view class="menu-text">商品管理</view>
        <view class="menu-desc">添加、编辑商品</view>
      </view>

      <view class="menu-item" bindtap="goToCategories" aria-label="分类管理" role="button">
        <view class="menu-icon blue">
          <image class="menu-icon-img" src="/assets/category.svg" mode="aspectFit"></image>
        </view>
        <view class="menu-text">分类管理</view>
        <view class="menu-desc">管理商品分类</view>
      </view>

      <view class="menu-item" bindtap="goToGenerated" aria-label="生成记录" role="button">
        <view class="menu-icon orange">
          <image class="menu-icon-img" src="/assets/history.svg" mode="aspectFit"></image>
        </view>
        <view class="menu-text">生成记录</view>
        <view class="menu-desc">查看试穿效果</view>
      </view>

      <view class="menu-item" bindtap="goToSettings" aria-label="店铺设置" role="button">
        <view class="menu-icon green">
          <image class="menu-icon-img" src="/assets/setting.svg" mode="aspectFit"></image>
        </view>
        <view class="menu-text">店铺设置</view>
        <view class="menu-desc">修改店铺信息</view>
      </view>
    </view>
  </view>

  <!-- 快捷操作 -->
  <view class="quick-section">
    <view class="section-title">快捷操作</view>
    <view class="quick-card" bindtap="previewStore" aria-label="预览店铺" role="button">
      <view class="quick-left">
        <image class="quick-icon-img" src="/assets/preview.svg" mode="aspectFit"></image>
        <text>预览店铺</text>
      </view>
      <view class="quick-right">
        <text class="quick-hint">查看顾客视角</text>
        <view class="arrow"></view>
      </view>
    </view>
    <view class="quick-card" bindtap="copyStoreLink" aria-label="复制店铺链接" role="button">
      <view class="quick-left">
        <image class="quick-icon-img" src="/assets/copy.svg" mode="aspectFit"></image>
        <text>复制店铺链接</text>
      </view>
      <view class="quick-right">
        <view class="arrow"></view>
      </view>
    </view>
  </view>

  <!-- 退出登录 -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="handleLogout">退出登录</button>
  </view>
</view>

<!-- 二维码弹窗 -->
<view class="qr-modal" wx:if="{{showQR}}" bindtap="hideQRCode">
  <view class="qr-content" catchtap="">
    <view class="qr-title">店铺二维码</view>
    <view class="qr-desc">顾客扫码即可进入试穿</view>
    <image class="qr-image" src="{{qrCodeUrl}}" mode="aspectFit"></image>
    <button class="qr-save-btn" bindtap="saveQRCode">保存二维码</button>
  </view>
</view>

